<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>32-Player 4-Person Visual Bracket</title>
<style>
body { font-family: Arial, sans-serif; }
.container { display: flex; justify-content: center; align-items: flex-start; margin-top: 20px; }
.round { display: flex; flex-direction: column; align-items: center; margin: 0 40px; position: relative; }
.match { border: 1px solid #333; padding: 6px; margin: 20px 0; width: 140px; background: #f9f9f9; position: relative; }
input { width: 120px; margin: 2px 0; text-align: center; }
svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
.line { stroke: #555; stroke-width: 2; }
.round-title { font-weight: bold; margin-bottom: 6px; }
</style>
</head>
<body>
<h1>32-Player Tournament: 4-Person Matches (Visual Branches)</h1>
<div class="container" id="bracketContainer">
  <!-- Rounds will be generated by JavaScript -->
</div>
<script>
const rounds = [8,4,2,1]; // Number of matches per round
const container = document.getElementById('bracketContainer');
const matchWidth = 140;
const matchHeight = 100;
const matchGap = 40;

// Keep references to match elements for drawing lines
const matchElements = [];

function createBracket(){
  let matchCounter = 1;
  for(let r=0;r<rounds.length;r++){
    const roundDiv = document.createElement('div');
    roundDiv.className='round';
    const title = document.createElement('div');
    title.className='round-title';
    title.innerText = `Round ${r+1}`;
    roundDiv.appendChild(title);
    const currentRoundMatches = [];

    for(let m=0;m<rounds[r];m++){
      const matchDiv = document.createElement('div');
      matchDiv.className='match';
      matchDiv.id=`r${r}m${m}`;
      for(let p=0;p<4;p++){
        const inp = document.createElement('input');
        inp.placeholder = `Player ${matchCounter++}`;
        matchDiv.appendChild(inp);
      }
      roundDiv.appendChild(matchDiv);
      currentRoundMatches.push(matchDiv);
    }
    matchElements.push(currentRoundMatches);
    container.appendChild(roundDiv);
  }
  drawConnections();
}

function drawConnections(){
  // Use SVG lines inside container
  const svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
  svg.setAttribute('width','100%');
  svg.setAttribute('height','2000');
  container.appendChild(svg);

  for(let r=0;r<rounds.length-1;r++){
    const curMatches = matchElements[r];
    const nextMatches = matchElements[r+1];
    const step = curMatches.length/nextMatches.length;

    nextMatches.forEach((nextMatch,i)=>{
      // connect top 2 of source matches to this next match
      const src1 = curMatches[i*step];
      const src2 = curMatches[i*step+1];
      [src1,src2].forEach(src=>{
        const srcRect = src.getBoundingClientRect();
        const destRect = nextMatch.getBoundingClientRect();
        // compute positions relative to container
        const cRect = container.getBoundingClientRect();
        const x1 = src.offsetLeft + matchWidth;
        const y1 = src.offsetTop + matchHeight/4; // first player
        const x2 = nextMatch.offsetLeft;
        const y2 = nextMatch.offsetTop + matchHeight/2;
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1',x1);
        line.setAttribute('y1',y1);
        line.setAttribute('x2',x2);
        line.setAttribute('y2',y2);
        line.classList.add('line');
        svg.appendChild(line);
      });
    });
  }
}

// Wait for DOM layout to calculate positions
window.onload = createBracket;
</script>
</body>
</html>
